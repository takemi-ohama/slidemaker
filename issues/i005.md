# Phase 4å®Ÿè£…è¨ˆç”»: PDF/ç”»åƒå¤‰æ›ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

**ä½œæˆæ—¥**: 2025-12-21
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: è¨ˆç”»ç­–å®šå®Œäº†
**æ¨å®šè¦æ¨¡**: ä¸­ã€œå¤§è¦æ¨¡ï¼ˆç´„1,000-1,200è¡Œï¼‰
**æ¨å®šå·¥æ•°**: 3-4é€±ï¼ˆé€±5æ—¥ã€1æ—¥6-8æ™‚é–“ï¼‰
**æ‹…å½“**: Director Agent â†’ å°‚é–€ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆcorder, qaï¼‰

## ğŸ“‹ ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [å®Ÿè£…ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«](#å®Ÿè£…ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«)
3. [å®Ÿè£…å„ªå…ˆé †ä½ã¨ã‚¹ãƒ†ãƒƒãƒ—](#å®Ÿè£…å„ªå…ˆé †ä½ã¨ã‚¹ãƒ†ãƒƒãƒ—)
4. [å¿…è¦ãªã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ](#å¿…è¦ãªã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ)
5. [ä¸¦åˆ—å®Ÿè¡Œå¯èƒ½ãªã‚¿ã‚¹ã‚¯](#ä¸¦åˆ—å®Ÿè¡Œå¯èƒ½ãªã‚¿ã‚¹ã‚¯)
6. [ä¾å­˜é–¢ä¿‚](#ä¾å­˜é–¢ä¿‚)
7. [ãƒ†ã‚¹ãƒˆæˆ¦ç•¥](#ãƒ†ã‚¹ãƒˆæˆ¦ç•¥)
8. [å“è³ªåŸºæº–](#å“è³ªåŸºæº–)
9. [ãƒªã‚¹ã‚¯ã¨å¯¾ç­–](#ãƒªã‚¹ã‚¯ã¨å¯¾ç­–)
10. [ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³](#ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³)

---

## æ¦‚è¦

Phase 4ã§ã¯ã€PDF/ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’æŠ½å‡ºãƒ»è§£æã—ã€ç·¨é›†å¯èƒ½ãªPowerPointãƒ•ã‚¡ã‚¤ãƒ«ã«å¤‰æ›ã™ã‚‹æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

### ä¸»è¦æ©Ÿèƒ½

1. **PDFãƒšãƒ¼ã‚¸æŠ½å‡º**: pdf2imageã‚’ä½¿ç”¨ã—ã¦PDFã‚’ç”»åƒã«å¤‰æ›
2. **LLMç”»åƒåˆ†æ**: ãƒ†ã‚­ã‚¹ãƒˆãƒ»ç”»åƒè¦ç´ ã®æ¤œå‡ºã¨ä½ç½®ç‰¹å®š
3. **ç”»åƒè¦ç´ ã®æŠ½å‡º**: æŒ‡å®šé ˜åŸŸã®åˆ‡ã‚Šå‡ºã—ã¨åŠ å·¥
4. **PowerPointå¤‰æ›**: è§£æçµæœã‹ã‚‰ã‚¹ãƒ©ã‚¤ãƒ‰å®šç¾©ã‚’ç”Ÿæˆã—ã€PowerPointã«å‡ºåŠ›

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

Phase 3ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¸è¥²ã—ã€`WorkflowOrchestrator`ã‚’ç¶™æ‰¿ã—ãŸ`ConversionWorkflow`ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

```
PDF/ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«
    â†“
ImageLoaderï¼ˆèª­ã¿è¾¼ã¿ãƒ»æ­£è¦åŒ–ï¼‰
    â†“
ImageAnalyzerï¼ˆLLMåˆ†æï¼‰
    â†“
ImageProcessorï¼ˆè¦ç´ æŠ½å‡ºãƒ»åŠ å·¥ï¼‰
    â†“
ConversionWorkflowï¼ˆçµ±åˆãƒ»å¤‰æ›ï¼‰
    â†“
PowerPointãƒ•ã‚¡ã‚¤ãƒ«
```

---

## å®Ÿè£…ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

### 1. ImageLoader (src/slidemaker/image_processing/loader.py)

**è²¬å‹™**: PDF/ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã¨æ­£è¦åŒ–

**æ¨å®šè¡Œæ•°**: ç´„200-250è¡Œ

**ä¸»è¦ã‚¯ãƒ©ã‚¹ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰:**
```python
class ImageLoader:
    """PDF/ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿"""

    async def load_pdf(self, pdf_path: Path, dpi: int = 300) -> list[Image.Image]:
        """PDFã‚’ãƒšãƒ¼ã‚¸ç”»åƒã«å¤‰æ›ï¼ˆpdf2imageä½¿ç”¨ï¼‰"""

    async def load_images(self, image_paths: list[Path]) -> list[Image.Image]:
        """è¤‡æ•°ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿"""

    async def load_single_image(self, image_path: Path) -> Image.Image:
        """å˜ä¸€ç”»åƒã®èª­ã¿è¾¼ã¿"""

    def _normalize_image(
        self,
        image: Image.Image,
        target_size: tuple[int, int] = (1920, 1080)
    ) -> Image.Image:
        """ç”»åƒã®æ­£è¦åŒ–ï¼ˆã‚µã‚¤ã‚ºã€å½¢å¼ï¼‰"""

    def _validate_image_format(self, image_path: Path) -> None:
        """ç”»åƒå½¢å¼ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆPNG, JPEG, GIF, BMPï¼‰"""
```

**å®Ÿè£…è©³ç´°:**
- **PDFå¤‰æ›**: `pdf2image.convert_from_path()` ã§PDFã‚’ç”»åƒãƒªã‚¹ãƒˆã«å¤‰æ›
  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆDPI: 300ï¼ˆé«˜å“è³ªï¼‰
  - ãƒšãƒ¼ã‚¸æ•°åˆ¶é™: æœ€å¤§100ãƒšãƒ¼ã‚¸ï¼ˆè¨­å®šå¯èƒ½ï¼‰
  - ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ã‚’è€ƒæ…®ã—ã¦ãƒšãƒ¼ã‚¸ã”ã¨ã«å‡¦ç†
- **ç”»åƒèª­ã¿è¾¼ã¿**: `Pillow.Image.open()` ã§å„ç¨®å½¢å¼ã‚’ã‚µãƒãƒ¼ãƒˆ
- **æ­£è¦åŒ–**:
  - 16:9ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ã«çµ±ä¸€ï¼ˆ1920x1080pxï¼‰
  - RGBå½¢å¼ã«å¤‰æ›ï¼ˆRGBA â†’ RGBå¤‰æ›å«ã‚€ï¼‰
  - EXIFå›è»¢æƒ…å ±ã®é©ç”¨
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
  - ãƒ•ã‚¡ã‚¤ãƒ«ä¸åœ¨æ™‚ã®æ˜ç¢ºãªã‚¨ãƒ©ãƒ¼
  - ç ´æç”»åƒã®ã‚¹ã‚­ãƒƒãƒ—
  - ãƒ¡ãƒ¢ãƒªä¸è¶³æ™‚ã®è­¦å‘Š

**ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸:**
- `pdf2image` (æ—¢å­˜)
- `Pillow` (æ—¢å­˜)
- `structlog` (æ—¢å­˜)

---

### 2. ImageAnalyzer (src/slidemaker/image_processing/analyzer.py)

**è²¬å‹™**: LLMã‚’ä½¿ã£ãŸç”»åƒåˆ†æï¼ˆãƒ†ã‚­ã‚¹ãƒˆãƒ»ç”»åƒè¦ç´ ã®æ¤œå‡ºï¼‰

**æ¨å®šè¡Œæ•°**: ç´„250-300è¡Œ

**ä¸»è¦ã‚¯ãƒ©ã‚¹ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰:**
```python
class ImageAnalyzer:
    """LLMã«ã‚ˆã‚‹ç”»åƒåˆ†æ"""

    def __init__(self, llm_manager: LLMManager):
        """LLMãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®æ³¨å…¥"""

    async def analyze_slide(
        self,
        image: Image.Image,
        slide_dimensions: tuple[int, int] = (1920, 1080)
    ) -> dict[str, Any]:
        """ã‚¹ãƒ©ã‚¤ãƒ‰ç”»åƒã®åˆ†æ

        Returns:
            {
                "elements": [
                    {
                        "type": "text" | "image",
                        "position": {"x": int, "y": int},
                        "size": {"width": int, "height": int},
                        "content": str,  # ãƒ†ã‚­ã‚¹ãƒˆã®å ´åˆ
                        "description": str,  # ç”»åƒã®å ´åˆ
                        "style": {...}  # ãƒ•ã‚©ãƒ³ãƒˆã€è‰²ãªã©
                    },
                    ...
                ],
                "background": {...}
            }
        """

    async def _detect_elements(
        self,
        image: Image.Image
    ) -> list[dict]:
        """è¦ç´ ã®æ¤œå‡ºï¼ˆãƒ†ã‚­ã‚¹ãƒˆã€ç”»åƒé ˜åŸŸï¼‰"""

    async def _extract_text_content(
        self,
        image: Image.Image,
        bbox: tuple[int, int, int, int]
    ) -> str:
        """ãƒ†ã‚­ã‚¹ãƒˆå†…å®¹ã®æŠ½å‡ºï¼ˆLLM OCRï¼‰"""

    async def _estimate_style(
        self,
        image: Image.Image,
        bbox: tuple[int, int, int, int]
    ) -> dict[str, Any]:
        """ã‚¹ã‚¿ã‚¤ãƒ«æƒ…å ±ã®æ¨å®šï¼ˆãƒ•ã‚©ãƒ³ãƒˆã€è‰²ï¼‰"""

    def _convert_to_slide_coordinates(
        self,
        bbox: tuple[int, int, int, int],
        image_size: tuple[int, int],
        slide_size: tuple[int, int]
    ) -> dict[str, int]:
        """ç”»åƒåº§æ¨™ã‹ã‚‰ã‚¹ãƒ©ã‚¤ãƒ‰åº§æ¨™ã¸ã®å¤‰æ›"""
```

**å®Ÿè£…è©³ç´°:**
- **LLMãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ**: Phase 1ã§å®Ÿè£…æ¸ˆã¿ã®`image_processing.py`ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½¿ç”¨
- **ç”»åƒã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**: Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦LLMã«é€ä¿¡ï¼ˆVision APIå¯¾å¿œï¼‰
- **è¦ç´ æ¤œå‡º**:
  - ãƒ†ã‚­ã‚¹ãƒˆè¦ç´ : åº§æ¨™ã€ã‚µã‚¤ã‚ºã€å†…å®¹ã€ãƒ•ã‚©ãƒ³ãƒˆã€è‰²
  - ç”»åƒè¦ç´ : åº§æ¨™ã€ã‚µã‚¤ã‚ºã€èª¬æ˜
  - èƒŒæ™¯: è‰²ã¾ãŸã¯ç”»åƒ
- **åº§æ¨™æ­£è¦åŒ–**:
  - å…¥åŠ›ç”»åƒã‚µã‚¤ã‚º â†’ ã‚¹ãƒ©ã‚¤ãƒ‰ã‚µã‚¤ã‚ºï¼ˆ1920x1080ï¼‰ã¸ã®åº§æ¨™å¤‰æ›
  - ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ã‚’è€ƒæ…®ã—ãŸåº§æ¨™è£œæ­£
- **JSONæ§‹é€ åŒ–**:
  - Pydanticãƒ¢ãƒ‡ãƒ«ã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆPhase 1ã®ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å†åˆ©ç”¨ï¼‰
  - LLMå‡ºåŠ›ã®ãƒ‘ãƒ¼ã‚¹ã¨ã‚¨ãƒ©ãƒ¼å›å¾©
- **ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯**:
  - LLM APIã‚¨ãƒ©ãƒ¼æ™‚ã®å†è©¦è¡Œï¼ˆ3å›ã¾ã§ï¼‰
  - æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•é©ç”¨

**ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸:**
- Phase 1ã®`LLMManager` (æ—¢å­˜)
- Phase 1ã®`image_processing.py` ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ (æ—¢å­˜)

---

### 3. ImageProcessor (src/slidemaker/image_processing/processor.py)

**è²¬å‹™**: ç”»åƒè¦ç´ ã®æŠ½å‡ºã¨åŠ å·¥

**æ¨å®šè¡Œæ•°**: ç´„200-250è¡Œ

**ä¸»è¦ã‚¯ãƒ©ã‚¹ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰:**
```python
class ImageProcessor:
    """ç”»åƒè¦ç´ ã®æŠ½å‡ºã¨åŠ å·¥"""

    async def extract_image_element(
        self,
        source_image: Image.Image,
        bbox: tuple[int, int, int, int],
        output_dir: Path
    ) -> Path:
        """ç”»åƒè¦ç´ ã®æŠ½å‡º

        Args:
            source_image: å…ƒç”»åƒ
            bbox: åˆ‡ã‚Šå‡ºã—é ˜åŸŸ (x, y, width, height)
            output_dir: å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

        Returns:
            æŠ½å‡ºã•ã‚ŒãŸç”»åƒã®ãƒ‘ã‚¹
        """

    async def remove_background(
        self,
        image: Image.Image
    ) -> Image.Image:
        """èƒŒæ™¯é™¤å»ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰"""

    async def clean_image(
        self,
        image: Image.Image
    ) -> Image.Image:
        """ç”»åƒã®ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ï¼ˆãƒã‚¤ã‚ºé™¤å»ï¼‰"""

    def _crop_with_aspect_ratio(
        self,
        image: Image.Image,
        bbox: tuple[int, int, int, int]
    ) -> Image.Image:
        """ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ã‚’ç¶­æŒã—ãŸåˆ‡ã‚Šå‡ºã—"""

    def _save_image(
        self,
        image: Image.Image,
        output_path: Path,
        quality: int = 95
    ) -> Path:
        """ç”»åƒã®ä¿å­˜"""
```

**å®Ÿè£…è©³ç´°:**
- **åˆ‡ã‚Šå‡ºã—**: `Image.crop()` ã§æŒ‡å®šé ˜åŸŸã‚’æŠ½å‡º
  - ãƒãƒ¼ã‚¸ãƒ³è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆå‘¨è¾ºä½™ç™½ã‚’å«ã‚ã‚‹ï¼‰
  - ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ã®ç¶­æŒ
- **èƒŒæ™¯é™¤å»**:
  - **Phase 4.1ã§ã¯æœªå®Ÿè£…** ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã¨ã—ã¦å°†æ¥å®Ÿè£…ï¼‰
  - ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ã®ã¿å®Ÿè£…
- **ç”»åƒã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°**:
  - ãƒã‚¤ã‚ºé™¤å»ï¼ˆ`ImageFilter.MedianFilter`ï¼‰
  - ã‚·ãƒ£ãƒ¼ãƒ—ãƒã‚¹èª¿æ•´ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- **ä¿å­˜**:
  - PNGå½¢å¼ã§ä¿å­˜ï¼ˆé€éå¯¾å¿œï¼‰
  - JPEGå“è³ª: 95%ï¼ˆãƒãƒ©ãƒ³ã‚¹é‡è¦–ï¼‰
  - ãƒ•ã‚¡ã‚¤ãƒ«å: `extracted_image_{index}_{timestamp}.png`
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
  - ç„¡åŠ¹ãªbboxæ™‚ã®ã‚¨ãƒ©ãƒ¼
  - ãƒ¡ãƒ¢ãƒªä¸è¶³æ™‚ã®è­¦å‘Š

**ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸:**
- `Pillow` (æ—¢å­˜)
- `rembg` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€Phase 4.1ã§ã¯ä¸è¦)

---

### 4. ConversionWorkflow (src/slidemaker/workflows/conversion.py)

**è²¬å‹™**: PDF/ç”»åƒã‹ã‚‰PowerPointã¸ã®å¤‰æ›ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

**æ¨å®šè¡Œæ•°**: ç´„350-400è¡Œ

**ä¸»è¦ã‚¯ãƒ©ã‚¹ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰:**
```python
class ConversionWorkflow(WorkflowOrchestrator):
    """PDF/ç”»åƒã‹ã‚‰PowerPointã¸ã®å¤‰æ›ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼"""

    def __init__(
        self,
        llm_manager: LLMManager,
        file_manager: FileManager,
        image_loader: ImageLoader,
        image_analyzer: ImageAnalyzer,
        image_processor: ImageProcessor,
        powerpoint_generator: PowerPointGenerator
    ):
        """ä¾å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ³¨å…¥"""

    async def execute(
        self,
        input_data: Any,  # list[Path] ã¾ãŸã¯ Path
        output_path: Path,
        **options
    ) -> Path:
        """å®Ÿè¡Œãƒ¡ã‚¤ãƒ³ãƒ¡ã‚½ãƒƒãƒ‰

        Steps:
            1. ç”»åƒã®èª­ã¿è¾¼ã¿ï¼ˆPDFå«ã‚€ï¼‰
            2. å„ãƒšãƒ¼ã‚¸ã®åˆ†æ
            3. ç”»åƒè¦ç´ ã®æŠ½å‡ºã¨ä¿å­˜
            4. ã‚¹ãƒ©ã‚¤ãƒ‰å®šç¾©ã®ä½œæˆ
            5. PowerPointç”Ÿæˆ

        Returns:
            ç”Ÿæˆã•ã‚ŒãŸPowerPointãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹
        """

    def _validate_input(self, input_data: Any) -> None:
        """å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³"""

    async def _load_images(self, paths: list[Path]) -> list[Image.Image]:
        """ç”»åƒã®èª­ã¿è¾¼ã¿ï¼ˆStep 1ï¼‰"""

    async def _analyze_images(
        self,
        images: list[Image.Image]
    ) -> list[dict]:
        """ç”»åƒã®åˆ†æï¼ˆStep 2ï¼‰"""

    async def _process_images(
        self,
        images: list[Image.Image],
        analyses: list[dict]
    ) -> dict[str, Path]:
        """ç”»åƒè¦ç´ ã®æŠ½å‡ºã¨ä¿å­˜ï¼ˆStep 3ï¼‰"""

    async def _create_slide_definitions(
        self,
        analyses: list[dict],
        processed_images: dict[str, Path]
    ) -> tuple[SlideConfig, list[PageDefinition]]:
        """ã‚¹ãƒ©ã‚¤ãƒ‰å®šç¾©ã®ä½œæˆï¼ˆStep 4ï¼‰"""

    async def _generate_powerpoint(
        self,
        config: SlideConfig,
        pages: list[PageDefinition],
        output_path: Path
    ) -> Path:
        """PowerPointãƒ•ã‚¡ã‚¤ãƒ«ã®ç”Ÿæˆï¼ˆStep 5ï¼‰"""
```

**å®Ÿè£…è©³ç´°:**

**Step 1: ç”»åƒã®èª­ã¿è¾¼ã¿**
- PDFãƒ•ã‚¡ã‚¤ãƒ«æ¤œå‡ºæ™‚ã¯`ImageLoader.load_pdf()`
- ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã¯`ImageLoader.load_images()`
- æ··åœ¨æ™‚ã®å‡¦ç†é †åº: PDF â†’ ç”»åƒï¼ˆãƒ•ã‚¡ã‚¤ãƒ«åé †ï¼‰

**Step 2: å„ãƒšãƒ¼ã‚¸ã®åˆ†æ**
- `ImageAnalyzer.analyze_slide()` ã‚’å„ç”»åƒã«é©ç”¨
- ä¸¦è¡Œå‡¦ç†ï¼ˆasyncio.gatherï¼‰ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š
- ã‚»ãƒãƒ•ã‚©ã§åŒæ™‚å®Ÿè¡Œæ•°ã‚’åˆ¶é™ï¼ˆmax_concurrent=3ï¼‰

**Step 3: ç”»åƒè¦ç´ ã®æŠ½å‡ºã¨ä¿å­˜**
- åˆ†æçµæœã‹ã‚‰ç”»åƒè¦ç´ ã‚’æŠ½å‡º
- `ImageProcessor.extract_image_element()` ã§åˆ‡ã‚Šå‡ºã—
- æŠ½å‡ºç”»åƒã‚’ãƒ†ãƒ³ãƒãƒ©ãƒªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜
- ç”»åƒãƒ‘ã‚¹ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ä½œæˆï¼ˆ`image_id â†’ Path`ï¼‰

**Step 4: ã‚¹ãƒ©ã‚¤ãƒ‰å®šç¾©ã®ä½œæˆ**
- LLMåˆ†æçµæœã‚’`PageDefinition`ã«å¤‰æ›
- `CompositionParser`ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å‚è€ƒã«å®Ÿè£…
- åº§æ¨™ãƒ»ã‚µã‚¤ã‚ºã®æ­£è¦åŒ–
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚¿ã‚¤ãƒ«ã®é©ç”¨

**Step 5: PowerPointç”Ÿæˆ**
- Phase 2ã®`PowerPointGenerator`ã‚’ä½¿ç”¨
- ã‚¹ãƒ©ã‚¤ãƒ‰å®šç¾©ã‹ã‚‰æœ€çµ‚PowerPointãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆ

**ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°:**
- å„ã‚¹ãƒ†ãƒƒãƒ—ã§ã®ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆWorkflowOrchestratorãŒæä¾›ï¼‰
- éƒ¨åˆ†å¤±æ•—ã®è¨±å®¹ï¼ˆä¸€éƒ¨ãƒšãƒ¼ã‚¸ã®ã¿æˆåŠŸã§ã‚‚ç¶™ç¶šï¼‰
- è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ­ã‚°å‡ºåŠ›

**ä¸¦è¡Œå‡¦ç†:**
- Step 2: è¤‡æ•°ç”»åƒã®ä¸¦è¡Œåˆ†æï¼ˆasyncio.gatherï¼‰
- Step 3: è¤‡æ•°ç”»åƒè¦ç´ ã®ä¸¦è¡ŒæŠ½å‡ºï¼ˆasyncio.gatherï¼‰

**ä¾å­˜é–¢ä¿‚:**
- Phase 1: LLMManager, FileManager, ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
- Phase 2: PowerPointGenerator
- Phase 3: WorkflowOrchestrator
- Phase 4: ImageLoader, ImageAnalyzer, ImageProcessor

---

## å®Ÿè£…å„ªå…ˆé †ä½ã¨ã‚¹ãƒ†ãƒƒãƒ—

### Week 1: ç”»åƒå‡¦ç†åŸºç›¤ï¼ˆImageLoader, ImageProcessorï¼‰

**Day 1-2: ImageLoaderå®Ÿè£…**
- PDFãƒšãƒ¼ã‚¸æŠ½å‡ºæ©Ÿèƒ½
- ç”»åƒèª­ã¿è¾¼ã¿æ©Ÿèƒ½
- æ­£è¦åŒ–æ©Ÿèƒ½
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆ15ãƒ†ã‚¹ãƒˆï¼‰

**Day 3-4: ImageProcessorå®Ÿè£…**
- ç”»åƒåˆ‡ã‚Šå‡ºã—æ©Ÿèƒ½
- ç”»åƒä¿å­˜æ©Ÿèƒ½
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆ12ãƒ†ã‚¹ãƒˆï¼‰

**Day 5: çµ±åˆãƒ†ã‚¹ãƒˆ**
- ImageLoader + ImageProcessorã®é€£æºãƒ†ã‚¹ãƒˆ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

**æˆæœç‰©:**
- `src/slidemaker/image_processing/loader.py` (ç´„200è¡Œ)
- `src/slidemaker/image_processing/processor.py` (ç´„200è¡Œ)
- `tests/image_processing/test_loader.py` (ç´„300è¡Œ)
- `tests/image_processing/test_processor.py` (ç´„250è¡Œ)

---

### Week 2: LLMç”»åƒåˆ†æï¼ˆImageAnalyzerï¼‰

**Day 1-3: ImageAnalyzerå®Ÿè£…**
- LLM Vision APIçµ±åˆ
- è¦ç´ æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯
- åº§æ¨™å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯
- JSONæ§‹é€ åŒ–
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆãƒ¢ãƒƒã‚¯LLMä½¿ç”¨ã€18ãƒ†ã‚¹ãƒˆï¼‰

**Day 4: çµ±åˆãƒ†ã‚¹ãƒˆ**
- ImageLoader + ImageAnalyzerã®é€£æºãƒ†ã‚¹ãƒˆ
- å®Ÿéš›ã®LLMã‚’ä½¿ç”¨ã—ãŸE2Eãƒ†ã‚¹ãƒˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

**Day 5: ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ”¹å–„**
- LLM APIã‚¨ãƒ©ãƒ¼æ™‚ã®å†è©¦è¡Œ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°

**æˆæœç‰©:**
- `src/slidemaker/image_processing/analyzer.py` (ç´„250è¡Œ)
- `tests/image_processing/test_analyzer.py` (ç´„400è¡Œ)

---

### Week 3: å¤‰æ›ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼ˆConversionWorkflowï¼‰

**Day 1-3: ConversionWorkflowå®Ÿè£…**
- 5ã‚¹ãƒ†ãƒƒãƒ—ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®Ÿè£…
- å„ã‚¹ãƒ†ãƒƒãƒ—ã®çµ±åˆ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆ20ãƒ†ã‚¹ãƒˆï¼‰

**Day 4: çµ±åˆãƒ†ã‚¹ãƒˆ**
- PDF â†’ PowerPoint E2Eãƒ†ã‚¹ãƒˆ
- ç”»åƒ â†’ PowerPoint E2Eãƒ†ã‚¹ãƒˆ
- æ··åœ¨å…¥åŠ›ã®ãƒ†ã‚¹ãƒˆ

**Day 5: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**
- ä¸¦è¡Œå‡¦ç†ã®æ”¹å–„
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®å‰Šæ¸›

**æˆæœç‰©:**
- `src/slidemaker/workflows/conversion.py` (ç´„350è¡Œ)
- `tests/workflows/test_conversion.py` (ç´„450è¡Œ)
- `tests/workflows/integration/test_conversion_workflow.py` (ç´„300è¡Œ)

---

### Week 4: ãƒ†ã‚¹ãƒˆãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼

**Day 1-2: åŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆè¿½åŠ **
- ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- ã‚«ãƒãƒ¬ãƒƒã‚¸æ”¹å–„ï¼ˆç›®æ¨™80%ä»¥ä¸Šï¼‰

**Day 3: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ**
- `docs/phase4_summary.md` ä½œæˆ
- API docstringã®å……å®Ÿ
- ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ä½œæˆ

**Day 4: ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨QAãƒã‚§ãƒƒã‚¯**
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆQAã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼‰
- ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯ï¼ˆruff, mypyï¼‰
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

**Day 5: æœ€çµ‚èª¿æ•´ã¨ãƒãƒ¼ã‚¸æº–å‚™**
- ãƒã‚°ä¿®æ­£
- CLAUDE.mdã®æ›´æ–°
- PRã®æº–å‚™

**æˆæœç‰©:**
- `docs/phase4_summary.md`
- `examples/sample_conversion.py`
- æ›´æ–°ã•ã‚ŒãŸ`CLAUDE.md`

---

## å¿…è¦ãªã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

### ğŸ¯ æ¨å¥¨ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé…åˆ†

#### 1. @corder (ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å°‚é–€) - **ä¸»æ‹…å½“**

**æ‹…å½“Week:**
- Week 1: ImageLoader, ImageProcessorå®Ÿè£…
- Week 2: ImageAnalyzerå®Ÿè£…
- Week 3: ConversionWorkflowå®Ÿè£…

**ã‚¿ã‚¹ã‚¯å†…å®¹:**
- æ–°è¦ã‚³ãƒ¼ãƒ‰å®Ÿè£…
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆä½œæˆ
- çµ±åˆãƒ†ã‚¹ãƒˆä½œæˆ
- ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

**æŒ‡ç¤ºä¾‹:**
```
Week 1ã‚¿ã‚¹ã‚¯: ImageLoaderã¨ImageProcessorã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚

å®Ÿè£…è¦ä»¶:
1. ImageLoader (src/slidemaker/image_processing/loader.py)
   - PDFãƒšãƒ¼ã‚¸æŠ½å‡ºï¼ˆpdf2imageä½¿ç”¨ï¼‰
   - ç”»åƒèª­ã¿è¾¼ã¿ï¼ˆPillowä½¿ç”¨ï¼‰
   - æ­£è¦åŒ–ï¼ˆ1920x1080ã€RGBå¤‰æ›ï¼‰
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

2. ImageProcessor (src/slidemaker/image_processing/processor.py)
   - ç”»åƒåˆ‡ã‚Šå‡ºã—
   - ç”»åƒä¿å­˜
   - ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ç¶­æŒ

3. ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
   - tests/image_processing/test_loader.pyï¼ˆ15ãƒ†ã‚¹ãƒˆï¼‰
   - tests/image_processing/test_processor.pyï¼ˆ12ãƒ†ã‚¹ãƒˆï¼‰

Phase 3ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆworkflows/base.py, new_slide.pyï¼‰ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚
Codex CLIã§ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å®Ÿæ–½ã—ã¦ãã ã•ã„ã€‚
```

---

#### 2. @qa (å“è³ªä¿è¨¼å°‚é–€) - **Week 4æ‹…å½“**

**æ‹…å½“Week:**
- Week 4: ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯

**ã‚¿ã‚¹ã‚¯å†…å®¹:**
- ã‚³ãƒ¼ãƒ‰å“è³ªãƒ¬ãƒ“ãƒ¥ãƒ¼
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ãƒã‚§ãƒƒã‚¯
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèª

**æŒ‡ç¤ºä¾‹:**
```
Phase 4å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„ã€‚

ãƒã‚§ãƒƒã‚¯é …ç›®:
1. ã‚³ãƒ¼ãƒ‰å“è³ª
   - å¯èª­æ€§ã€ä¿å®ˆæ€§
   - Phase 1-3ã¨ã®ä¸€è²«æ€§
   - Pythonãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹æº–æ‹ 

2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
   - ãƒ‘ã‚¹ãƒˆãƒ©ãƒãƒ¼ã‚µãƒ«å¯¾ç­–ï¼ˆFileManagerä½¿ç”¨ï¼‰
   - ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
   - ãƒ¡ãƒ¢ãƒªæ¯æ¸‡å¯¾ç­–
   - OWASP Top 10æº–æ‹ 

3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
   - ä¸¦è¡Œå‡¦ç†ã®é©åˆ‡æ€§
   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
   - PDFå¤‰æ›é€Ÿåº¦ï¼ˆç›®æ¨™: 1ãƒšãƒ¼ã‚¸/ç§’ï¼‰

4. ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
   - ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ: 80%ä»¥ä¸Š
   - çµ±åˆãƒ†ã‚¹ãƒˆ: ä¸»è¦ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼100%

Codexã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³ã‚’å®Ÿæ–½ã—ã¦ãã ã•ã„ã€‚
æ”¹å–„ææ¡ˆã‚’å…·ä½“çš„ã«æç¤ºã—ã¦ãã ã•ã„ã€‚
```

---

#### 3. @researcher (èª¿æŸ»å°‚é–€) - **ã‚ªãƒ—ã‚·ãƒ§ãƒ³**

**æ‹…å½“ã‚¿ã‚¹ã‚¯:**
- pdf2imageã€Pillowã€rembgã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹èª¿æŸ»ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

**æŒ‡ç¤ºä¾‹:**
```
pdf2imageã¨Pillowã®æœ€é©ãªä½¿ç”¨æ–¹æ³•ã‚’èª¿æŸ»ã—ã¦ãã ã•ã„ã€‚

èª¿æŸ»é …ç›®:
1. pdf2image
   - DPIè¨­å®šã®æœ€é©å€¤ï¼ˆå“è³ª vs ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼‰
   - ãƒ¡ãƒ¢ãƒªåŠ¹ç‡çš„ãªãƒšãƒ¼ã‚¸å‡¦ç†æ–¹æ³•
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

2. Pillow
   - ç”»åƒæ­£è¦åŒ–ã®æ¨å¥¨æ‰‹é †
   - EXIFå›è»¢æƒ…å ±ã®å‡¦ç†
   - RGBA â†’ RGBå¤‰æ›ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã€ã‚³ãƒ¼ãƒ‰ä¾‹ã‚’å«ã‚ã¦å ±å‘Šã—ã¦ãã ã•ã„ã€‚
```

---

## ä¸¦åˆ—å®Ÿè¡Œå¯èƒ½ãªã‚¿ã‚¹ã‚¯

### ğŸ”„ ä¸¦åˆ—å®Ÿè¡Œæ¨å¥¨ï¼ˆWeek 1ï¼‰

**æ¡ä»¶:**
- ImageLoader ã¨ ImageProcessor ã¯ç‹¬ç«‹
- ç•°ãªã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã€ç•°ãªã‚‹ã‚¯ãƒ©ã‚¹
- ä¾å­˜é–¢ä¿‚ãªã—

**Main Agentã¸ã®æ¨å¥¨:**
```
Week 1ã‚¿ã‚¹ã‚¯ã¯ä¸¦åˆ—å®Ÿè¡Œå¯èƒ½ã§ã™ã€‚

ã€ä¸¦åˆ—å®Ÿè¡Œæ¨å¥¨ã€‘
1. corder - ImageLoaderå®Ÿè£…ï¼ˆsrc/slidemaker/image_processing/loader.pyï¼‰
2. corder - ImageProcessorå®Ÿè£…ï¼ˆsrc/slidemaker/image_processing/processor.pyï¼‰

ç†ç”±:
- å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ãŒå®Œå…¨ã«ç‹¬ç«‹
- ã‚¯ãƒ©ã‚¹é–“ã®ä¾å­˜é–¢ä¿‚ãªã—
- å„ã‚¿ã‚¹ã‚¯ã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã¯ä¸­ç¨‹åº¦

æ¨å¥¨ä¸¦åˆ—æ•°: 2ã‚¿ã‚¹ã‚¯ï¼ˆä¸­ã‚¿ã‚¹ã‚¯ x 2ï¼‰
```

### ğŸ”— é€æ¬¡å®Ÿè¡Œå¿…é ˆï¼ˆWeek 2-3ï¼‰

**Week 2: ImageAnalyzer**
- ImageLoaderã«ä¾å­˜ï¼ˆç”»åƒèª­ã¿è¾¼ã¿ãŒå‰æï¼‰
- Week 1å®Œäº†å¾Œã«é–‹å§‹

**Week 3: ConversionWorkflow**
- ImageLoader, ImageAnalyzer, ImageProcessorã™ã¹ã¦ã«ä¾å­˜
- Week 2å®Œäº†å¾Œã«é–‹å§‹

---

## ä¾å­˜é–¢ä¿‚

### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¾å­˜é–¢ä¿‚

**æ—¢å­˜ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆpyproject.tomlã«è¨˜è¼‰æ¸ˆã¿ï¼‰:**
- `python-pptx>=0.6.21` âœ…
- `Pillow>=10.0.0` âœ…
- `pdf2image>=1.16.0` âœ…
- `pydantic>=2.0.0` âœ…
- `structlog>=23.1.0` âœ…
- `httpx>=0.25.0` âœ…
- LLM SDKs (anthropic, openai, google-generativeai) âœ…

**è¿½åŠ ä¸è¦:**
- `rembg` ã¯ Phase 4.1ã§ã¯æœªä½¿ç”¨ï¼ˆèƒŒæ™¯é™¤å»ã¯å°†æ¥æ©Ÿèƒ½ï¼‰

**ã‚·ã‚¹ãƒ†ãƒ ä¾å­˜:**
- `poppler-utils` (pdf2imageã®ä¾å­˜)
  - Ubuntu/Debian: `apt-get install poppler-utils`
  - macOS: `brew install poppler`
  - Windows: poppler binariesã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä¾å­˜é–¢ä¿‚

```
ConversionWorkflow
â”œâ”€â”€ ImageLoader
â”‚   â””â”€â”€ Pillow, pdf2image
â”œâ”€â”€ ImageAnalyzer
â”‚   â”œâ”€â”€ LLMManager (Phase 1)
â”‚   â””â”€â”€ image_processing prompts (Phase 1)
â”œâ”€â”€ ImageProcessor
â”‚   â””â”€â”€ Pillow
â”œâ”€â”€ PowerPointGenerator (Phase 2)
â””â”€â”€ WorkflowOrchestrator (Phase 3)
```

---

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆç›®æ¨™ã‚«ãƒãƒ¬ãƒƒã‚¸: 80%ä»¥ä¸Šï¼‰

#### tests/image_processing/test_loader.py (ç´„300è¡Œã€15ãƒ†ã‚¹ãƒˆ)
```python
class TestImageLoader:
    def test_load_pdf_basic(self):
        """PDFã®åŸºæœ¬èª­ã¿è¾¼ã¿"""

    def test_load_pdf_multiple_pages(self):
        """è¤‡æ•°ãƒšãƒ¼ã‚¸PDFã®èª­ã¿è¾¼ã¿"""

    def test_load_images_various_formats(self):
        """å„ç¨®ç”»åƒå½¢å¼ã®èª­ã¿è¾¼ã¿ï¼ˆPNG, JPEG, GIFï¼‰"""

    def test_normalize_image_resize(self):
        """ç”»åƒã®æ­£è¦åŒ–ï¼ˆãƒªã‚µã‚¤ã‚ºï¼‰"""

    def test_normalize_image_rgb_conversion(self):
        """RGBA â†’ RGBå¤‰æ›"""

    def test_validate_image_format_valid(self):
        """æœ‰åŠ¹ãªç”»åƒå½¢å¼ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³"""

    def test_validate_image_format_invalid(self):
        """ç„¡åŠ¹ãªç”»åƒå½¢å¼ã®ã‚¨ãƒ©ãƒ¼"""

    def test_load_pdf_file_not_found(self):
        """PDFãƒ•ã‚¡ã‚¤ãƒ«ä¸åœ¨æ™‚ã®ã‚¨ãƒ©ãƒ¼"""

    def test_load_images_corrupted_file(self):
        """ç ´æç”»åƒã®ã‚¹ã‚­ãƒƒãƒ—"""

    def test_load_pdf_with_custom_dpi(self):
        """ã‚«ã‚¹ã‚¿ãƒ DPIè¨­å®š"""

    def test_load_images_with_exif_rotation(self):
        """EXIFå›è»¢æƒ…å ±ã®é©ç”¨"""

    def test_normalize_image_aspect_ratio(self):
        """ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ã®ç¶­æŒ"""

    def test_load_pdf_memory_efficiency(self):
        """å¤§å®¹é‡PDFã®ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ãƒ†ã‚¹ãƒˆ"""

    def test_load_images_empty_list(self):
        """ç©ºãƒªã‚¹ãƒˆã®å‡¦ç†"""

    def test_load_pdf_page_limit(self):
        """ãƒšãƒ¼ã‚¸æ•°åˆ¶é™ã®ãƒ†ã‚¹ãƒˆ"""
```

#### tests/image_processing/test_analyzer.py (ç´„400è¡Œã€18ãƒ†ã‚¹ãƒˆ)
```python
class TestImageAnalyzer:
    def test_analyze_slide_basic(self, mock_llm):
        """åŸºæœ¬çš„ãªã‚¹ãƒ©ã‚¤ãƒ‰åˆ†æ"""

    def test_analyze_slide_text_elements(self, mock_llm):
        """ãƒ†ã‚­ã‚¹ãƒˆè¦ç´ ã®æ¤œå‡º"""

    def test_analyze_slide_image_elements(self, mock_llm):
        """ç”»åƒè¦ç´ ã®æ¤œå‡º"""

    def test_detect_elements_multiple(self, mock_llm):
        """è¤‡æ•°è¦ç´ ã®æ¤œå‡º"""

    def test_extract_text_content(self, mock_llm):
        """ãƒ†ã‚­ã‚¹ãƒˆå†…å®¹ã®æŠ½å‡º"""

    def test_estimate_style_font(self, mock_llm):
        """ãƒ•ã‚©ãƒ³ãƒˆæƒ…å ±ã®æ¨å®š"""

    def test_estimate_style_color(self, mock_llm):
        """è‰²æƒ…å ±ã®æ¨å®š"""

    def test_convert_to_slide_coordinates(self):
        """åº§æ¨™å¤‰æ›ã®æ­£ç¢ºæ€§"""

    def test_analyze_slide_with_background(self, mock_llm):
        """èƒŒæ™¯æƒ…å ±ã®æŠ½å‡º"""

    def test_analyze_slide_llm_error_retry(self, mock_llm):
        """LLM APIã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒªãƒˆãƒ©ã‚¤"""

    def test_analyze_slide_invalid_json(self, mock_llm):
        """ç„¡åŠ¹ãªJSONå‡ºåŠ›æ™‚ã®ã‚¨ãƒ©ãƒ¼å›å¾©"""

    def test_analyze_slide_empty_elements(self, mock_llm):
        """è¦ç´ ãªã—ã‚¹ãƒ©ã‚¤ãƒ‰ã®å‡¦ç†"""

    def test_analyze_slide_coordinate_normalization(self):
        """åº§æ¨™æ­£è¦åŒ–ã®ç²¾åº¦ãƒ†ã‚¹ãƒˆ"""

    def test_analyze_slide_various_dimensions(self, mock_llm):
        """æ§˜ã€…ãªã‚¹ãƒ©ã‚¤ãƒ‰ã‚µã‚¤ã‚ºã¸ã®å¯¾å¿œ"""

    def test_analyze_slide_concurrent(self, mock_llm):
        """ä¸¦è¡Œåˆ†æã®ãƒ†ã‚¹ãƒˆ"""

    def test_analyze_slide_timeout(self, mock_llm):
        """ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°"""

    def test_analyze_slide_partial_failure(self, mock_llm):
        """éƒ¨åˆ†çš„ãªåˆ†æå¤±æ•—ã®å‡¦ç†ã€

    def test_analyze_slide_cache_behavior(self, mock_llm):
        """ã‚­ãƒ£ãƒƒã‚·ãƒ¥å‹•ä½œã®æ¤œè¨¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰"""
```

#### tests/image_processing/test_processor.py (ç´„250è¡Œã€12ãƒ†ã‚¹ãƒˆ)
```python
class TestImageProcessor:
    def test_extract_image_element_basic(self):
        """åŸºæœ¬çš„ãªç”»åƒåˆ‡ã‚Šå‡ºã—"""

    def test_extract_image_element_with_margin(self):
        """ãƒãƒ¼ã‚¸ãƒ³ä»˜ãåˆ‡ã‚Šå‡ºã—"""

    def test_crop_with_aspect_ratio(self):
        """ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ç¶­æŒã®åˆ‡ã‚Šå‡ºã—"""

    def test_save_image_png(self):
        """PNGå½¢å¼ã§ã®ä¿å­˜"""

    def test_save_image_jpeg_quality(self):
        """JPEGå“è³ªè¨­å®š"""

    def test_extract_image_element_invalid_bbox(self):
        """ç„¡åŠ¹ãªbboxæ™‚ã®ã‚¨ãƒ©ãƒ¼"""

    def test_clean_image_noise_removal(self):
        """ãƒã‚¤ã‚ºé™¤å»"""

    def test_remove_background_placeholder(self):
        """èƒŒæ™¯é™¤å»ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ï¼ˆæœªå®Ÿè£…ï¼‰"""

    def test_extract_image_element_output_dir_creation(self):
        """å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªè‡ªå‹•ä½œæˆã€

    def test_extract_image_element_filename_format(self):
        """ãƒ•ã‚¡ã‚¤ãƒ«åãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¤œè¨¼ã€

    def test_extract_image_element_concurrent(self):
        """ä¸¦è¡ŒæŠ½å‡ºã®ãƒ†ã‚¹ãƒˆã€

    def test_extract_image_element_memory_efficiency(self):
        """ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ãƒ†ã‚¹ãƒˆã€
```

#### tests/workflows/test_conversion.py (ç´„450è¡Œã€20ãƒ†ã‚¹ãƒˆ)
```python
class TestConversionWorkflow:
    def test_execute_pdf_to_pptx(self, mock_components):
        """PDF â†’ PowerPoint E2E"""

    def test_execute_images_to_pptx(self, mock_components):
        """ç”»åƒ â†’ PowerPoint E2E"""

    def test_execute_mixed_input(self, mock_components):
        """æ··åœ¨å…¥åŠ›ï¼ˆPDF + ç”»åƒï¼‰"""

    def test_validate_input_valid_pdf(self):
        """æœ‰åŠ¹ãªPDFå…¥åŠ›ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³"""

    def test_validate_input_invalid_format(self):
        """ç„¡åŠ¹ãªãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã®ã‚¨ãƒ©ãƒ¼"""

    def test_load_images_step(self, mock_loader):
        """ç”»åƒèª­ã¿è¾¼ã¿ã‚¹ãƒ†ãƒƒãƒ—"""

    def test_analyze_images_step(self, mock_analyzer):
        """ç”»åƒåˆ†æã‚¹ãƒ†ãƒƒãƒ—"""

    def test_process_images_step(self, mock_processor):
        """ç”»åƒå‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—"""

    def test_create_slide_definitions_step(self):
        """ã‚¹ãƒ©ã‚¤ãƒ‰å®šç¾©ä½œæˆã‚¹ãƒ†ãƒƒãƒ—ã€

    def test_generate_powerpoint_step(self, mock_generator):
        """PowerPointç”Ÿæˆã‚¹ãƒ†ãƒƒãƒ—ã€

    def test_execute_with_retry(self, mock_components):
        """ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆã€

    def test_execute_partial_failure(self, mock_components):
        """éƒ¨åˆ†å¤±æ•—æ™‚ã®ç¶™ç¶šå‡¦ç†ã€

    def test_execute_concurrent_analysis(self, mock_components):
        """ä¸¦è¡Œåˆ†æã®ãƒ†ã‚¹ãƒˆã€

    def test_execute_output_path_validation(self, mock_components):
        """å‡ºåŠ›ãƒ‘ã‚¹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€

    def test_execute_with_custom_options(self, mock_components):
        """ã‚«ã‚¹ã‚¿ãƒ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆãƒ†ãƒ¼ãƒã€ã‚µã‚¤ã‚ºï¼‰ã€

    def test_execute_error_logging(self, mock_components):
        """ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°å‡ºåŠ›ã®æ¤œè¨¼ã€

    def test_execute_progress_logging(self, mock_components):
        """é€²æ—ãƒ­ã‚°å‡ºåŠ›ã®æ¤œè¨¼ã€

    def test_execute_cleanup_on_failure(self, mock_components):
        """å¤±æ•—æ™‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã€

    def test_execute_large_pdf(self, mock_components):
        """å¤§å®¹é‡PDFã®å‡¦ç†ã€

    def test_execute_image_path_mapping(self, mock_components):
        """ç”»åƒãƒ‘ã‚¹ãƒãƒƒãƒ”ãƒ³ã‚°ã®æ­£ç¢ºæ€§ã€
```

### çµ±åˆãƒ†ã‚¹ãƒˆ

#### tests/workflows/integration/test_conversion_workflow.py (ç´„300è¡Œã€5ãƒ†ã‚¹ãƒˆ)
```python
class TestConversionWorkflowIntegration:
    @pytest.mark.integration
    def test_full_pdf_conversion(self):
        """å®Œå…¨ãªPDFå¤‰æ›ãƒ•ãƒ­ãƒ¼ï¼ˆå®Ÿéš›ã®LLMä½¿ç”¨ï¼‰"""

    @pytest.mark.integration
    def test_full_image_conversion(self):
        """å®Œå…¨ãªç”»åƒå¤‰æ›ãƒ•ãƒ­ãƒ¼ï¼ˆå®Ÿéš›ã®LLMä½¿ç”¨ï¼‰"""

    @pytest.mark.integration
    def test_multi_page_pdf(self):
        """è¤‡æ•°ãƒšãƒ¼ã‚¸PDFã®å¤‰æ›ã€

    @pytest.mark.integration
    def test_conversion_performance(self):
        """ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆ1ãƒšãƒ¼ã‚¸/ç§’ï¼‰ã€

    @pytest.mark.integration
    def test_conversion_with_real_files(self):
        """å®Ÿéš›ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã—ãŸãƒ†ã‚¹ãƒˆã€
```

---

## å“è³ªåŸºæº–

### ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸

| ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« | ç›®æ¨™ã‚«ãƒãƒ¬ãƒƒã‚¸ | æ¸¬å®šæ–¹æ³• |
|-----------|--------------|---------|
| ImageLoader | 85%ä»¥ä¸Š | pytest-cov |
| ImageAnalyzer | 80%ä»¥ä¸Š | pytest-cov |
| ImageProcessor | 85%ä»¥ä¸Š | pytest-cov |
| ConversionWorkflow | 80%ä»¥ä¸Š | pytest-cov |
| **å…¨ä½“** | **80%ä»¥ä¸Š** | pytest-cov |

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

| æŒ‡æ¨™ | ç›®æ¨™å€¤ | æ¸¬å®šæ–¹æ³• |
|-----|-------|---------|
| PDFå¤‰æ›é€Ÿåº¦ | 1ãƒšãƒ¼ã‚¸/ç§’ä»¥ä¸Š | çµ±åˆãƒ†ã‚¹ãƒˆ |
| ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ | 500MBä»¥ä¸‹/10ãƒšãƒ¼ã‚¸ | ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚° |
| LLMåˆ†ææ™‚é–“ | 5ç§’/ãƒšãƒ¼ã‚¸ä»¥ä¸‹ | çµ±åˆãƒ†ã‚¹ãƒˆ |
| ä¸¦è¡Œå‡¦ç†åŠ¹ç‡ | 3å€é€Ÿï¼ˆ3ä¸¦è¡Œæ™‚ï¼‰ | ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ |

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

| é …ç›® | å¯¾ç­– | æ¤œè¨¼æ–¹æ³• |
|-----|------|---------|
| ãƒ‘ã‚¹ãƒˆãƒ©ãƒãƒ¼ã‚µãƒ« | FileManagerä½¿ç”¨ | ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ |
| ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ | å½¢å¼ãƒ»ã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯ | ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ |
| ãƒ¡ãƒ¢ãƒªæ¯æ¸‡å¯¾ç­– | ãƒšãƒ¼ã‚¸æ•°åˆ¶é™ã€ã‚»ãƒãƒ•ã‚© | çµ±åˆãƒ†ã‚¹ãƒˆ |
| LLMå…¥åŠ›æ¤œè¨¼ | Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° | ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ |
| ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç† | è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ— | çµ±åˆãƒ†ã‚¹ãƒˆ |

### ã‚³ãƒ¼ãƒ‰å“è³ª

| é …ç›® | åŸºæº– | ãƒ„ãƒ¼ãƒ« |
|-----|------|-------|
| ãƒªãƒ³ã‚¿ãƒ¼ | ruffãƒã‚§ãƒƒã‚¯åˆæ ¼ | ruff check |
| å‹ãƒã‚§ãƒƒã‚¯ | mypyãƒã‚§ãƒƒã‚¯åˆæ ¼ï¼ˆstrict modeï¼‰ | mypy |
| docstring | Googleå½¢å¼ã€å…¨ãƒ‘ãƒ–ãƒªãƒƒã‚¯APIã«è¨˜è¼‰ | ç›®è¦–ç¢ºèª |
| ã‚³ãƒ¡ãƒ³ãƒˆ | è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã«èª¬æ˜ | ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ |
| ä¸€è²«æ€§ | Phase 1-3ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã«æº–æ‹  | ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ |

---

## ãƒªã‚¹ã‚¯ã¨å¯¾ç­–

### ãƒªã‚¹ã‚¯1: LLMç”»åƒåˆ†æã®ç²¾åº¦ä¸è¶³

**ãƒªã‚¹ã‚¯å†…å®¹:**
- LLMãŒè¦ç´ ã‚’æ­£ç¢ºã«æ¤œå‡ºã§ããªã„
- åº§æ¨™ãŒãšã‚Œã‚‹
- ãƒ†ã‚­ã‚¹ãƒˆå†…å®¹ã®æŠ½å‡ºãƒŸã‚¹

**å¯¾ç­–:**
- é«˜å“è³ªãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆï¼ˆPhase 1ã§å®Ÿè£…æ¸ˆã¿ï¼‰
- è¤‡æ•°LLMã®ä½µç”¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆClaude, GPT-4V, Geminiï¼‰
- åˆ†æçµæœã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã‚‹æ‰‹å‹•ä¿®æ­£æ©Ÿèƒ½ï¼ˆPhase 5ã§å®Ÿè£…ï¼‰

**å½±éŸ¿åº¦**: ä¸­
**å¯¾ç­–å„ªå…ˆåº¦**: é«˜

---

### ãƒªã‚¹ã‚¯2: PDFå¤‰æ›ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

**ãƒªã‚¹ã‚¯å†…å®¹:**
- å¤§å®¹é‡PDFã®å‡¦ç†ãŒé…ã„
- ãƒ¡ãƒ¢ãƒªä¸è¶³ã§ã‚¯ãƒ©ãƒƒã‚·ãƒ¥

**å¯¾ç­–:**
- ãƒšãƒ¼ã‚¸æ•°åˆ¶é™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ100ãƒšãƒ¼ã‚¸ï¼‰
- ãƒšãƒ¼ã‚¸ã”ã¨ã®é€æ¬¡å‡¦ç†ï¼ˆãƒ¡ãƒ¢ãƒªåŠ¹ç‡é‡è¦–ï¼‰
- DPIè¨­å®šã®æœ€é©åŒ–ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ300ï¼‰
- é€²æ—è¡¨ç¤ºã¨ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ©Ÿèƒ½

**å½±éŸ¿åº¦**: ä¸­
**å¯¾ç­–å„ªå…ˆåº¦**: ä¸­

---

### ãƒªã‚¹ã‚¯3: ç”»åƒè¦ç´ ã®åˆ‡ã‚Šå‡ºã—ç²¾åº¦

**ãƒªã‚¹ã‚¯å†…å®¹:**
- LLMåˆ†æã®åº§æ¨™ç²¾åº¦ä¸è¶³
- åˆ‡ã‚Šå‡ºã—é ˜åŸŸã®ãšã‚Œ

**å¯¾ç­–:**
- åº§æ¨™æ­£è¦åŒ–ã®ç²¾åº¦å‘ä¸Š
- ãƒãƒ¼ã‚¸ãƒ³è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ç¶­æŒãƒ­ã‚¸ãƒƒã‚¯
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ï¼ˆPhase 5ï¼‰

**å½±éŸ¿åº¦**: ä½
**å¯¾ç­–å„ªå…ˆåº¦**: ä¸­

---

### ãƒªã‚¹ã‚¯4: ãƒ†ã‚¹ãƒˆä¸è¶³

**ãƒªã‚¹ã‚¯å†…å®¹:**
- ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®è¦‹è½ã¨ã—
- çµ±åˆãƒ†ã‚¹ãƒˆä¸è¶³

**å¯¾ç­–:**
- åŒ…æ‹¬çš„ãªãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆ80%ã‚«ãƒãƒ¬ãƒƒã‚¸ï¼‰
- çµ±åˆãƒ†ã‚¹ãƒˆå¿…é ˆ
- QAã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã‚‹ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆWeek 4ï¼‰
- å®Ÿéš›ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã—ãŸE2Eãƒ†ã‚¹ãƒˆ

**å½±éŸ¿åº¦**: é«˜
**å¯¾ç­–å„ªå…ˆåº¦**: é«˜

---

## ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

### Week 1: ç”»åƒå‡¦ç†åŸºç›¤ï¼ˆImageLoader, ImageProcessorï¼‰

- [ ] ImageLoaderå®Ÿè£…å®Œäº†
- [ ] ImageProcessorå®Ÿè£…å®Œäº†
- [ ] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå®Œäº†ï¼ˆ27ãƒ†ã‚¹ãƒˆï¼‰
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆCodex CLIï¼‰

**æˆæœç‰©:**
- `src/slidemaker/image_processing/loader.py`
- `src/slidemaker/image_processing/processor.py`
- `tests/image_processing/test_loader.py`
- `tests/image_processing/test_processor.py`

---

### Week 2: LLMç”»åƒåˆ†æï¼ˆImageAnalyzerï¼‰

- [ ] ImageAnalyzerå®Ÿè£…å®Œäº†
- [ ] LLM Vision APIçµ±åˆå®Œäº†
- [ ] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå®Œäº†ï¼ˆ18ãƒ†ã‚¹ãƒˆï¼‰
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…å®Œäº†

**æˆæœç‰©:**
- `src/slidemaker/image_processing/analyzer.py`
- `tests/image_processing/test_analyzer.py`

---

### Week 3: å¤‰æ›ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼ˆConversionWorkflowï¼‰

- [ ] ConversionWorkflowå®Ÿè£…å®Œäº†
- [ ] 5ã‚¹ãƒ†ãƒƒãƒ—ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³çµ±åˆå®Œäº†
- [ ] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå®Œäº†ï¼ˆ20ãƒ†ã‚¹ãƒˆï¼‰
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆå®Œäº†ï¼ˆ5ãƒ†ã‚¹ãƒˆï¼‰
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–å®Œäº†

**æˆæœç‰©:**
- `src/slidemaker/workflows/conversion.py`
- `tests/workflows/test_conversion.py`
- `tests/workflows/integration/test_conversion_workflow.py`

---

### Week 4: ãƒ†ã‚¹ãƒˆãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼

- [ ] ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] ã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Šé”æˆ
- [ ] `docs/phase4_summary.md` ä½œæˆå®Œäº†
- [ ] QAã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº†
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯å®Œäº†
- [ ] `CLAUDE.md` æ›´æ–°å®Œäº†
- [ ] PRä½œæˆãƒ»ãƒãƒ¼ã‚¸å®Œäº†

**æˆæœç‰©:**
- `docs/phase4_summary.md`
- `examples/sample_conversion.py`
- æ›´æ–°ã•ã‚ŒãŸ`CLAUDE.md`
- Phase 4å®Œäº†PR

---

## æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### ã™ãã«å®Ÿè¡Œã™ã¹ãã“ã¨ï¼ˆWeek 1ï¼‰

1. **ImageLoaderå®Ÿè£…é–‹å§‹**
   - corderã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ä¾é ¼
   - Phase 3ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å‚è€ƒã«å®Ÿè£…
   - ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆä½œæˆ

2. **ImageProcessorå®Ÿè£…é–‹å§‹**ï¼ˆä¸¦åˆ—å®Ÿè¡Œæ¨å¥¨ï¼‰
   - corderã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ä¾é ¼ï¼ˆåˆ¥ã‚¿ã‚¹ã‚¯ï¼‰
   - ImageLoaderã¨ä¸¦è¡Œå®Ÿè£…å¯èƒ½
   - ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆä½œæˆ

3. **ã‚·ã‚¹ãƒ†ãƒ ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç¢ºèª**
   - `poppler-utils` ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
   - é–‹ç™ºç’°å¢ƒã§ã®å‹•ä½œç¢ºèª

### Week 2ä»¥é™ã®æº–å‚™

1. **LLM Vision APIèª¿æŸ»**ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
   - researcherã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ä¾é ¼ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
   - Claude, GPT-4V, Geminiã®æ¯”è¼ƒ

2. **ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«æº–å‚™**
   - ãƒ†ã‚¹ãƒˆç”¨PDFãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
   - ãƒ†ã‚¹ãƒˆç”¨ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
   - `examples/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®

---

## ã¾ã¨ã‚

Phase 4å®Ÿè£…è¨ˆç”»ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ç­–å®šã—ã¾ã—ãŸã€‚

**å®Ÿè£…è¦æ¨¡:**
- ç´„1,000-1,200è¡Œï¼ˆã‚³ãƒ¼ãƒ‰ï¼‰
- ç´„1,500-1,800è¡Œï¼ˆãƒ†ã‚¹ãƒˆï¼‰
- åˆè¨ˆ82ãƒ†ã‚¹ãƒˆ

**æ¨å®šå·¥æ•°:**
- Week 1: ç”»åƒå‡¦ç†åŸºç›¤ï¼ˆ5æ—¥ï¼‰
- Week 2: LLMç”»åƒåˆ†æï¼ˆ5æ—¥ï¼‰
- Week 3: å¤‰æ›ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼ˆ5æ—¥ï¼‰
- Week 4: ãƒ†ã‚¹ãƒˆãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆ5æ—¥ï¼‰
- **åˆè¨ˆ**: 20æ—¥ï¼ˆ3-4é€±ï¼‰

**å¿…è¦ãªã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ:**
1. **corder** (ä¸»æ‹…å½“): Week 1-3ã®å®Ÿè£…
2. **qa** (ãƒ¬ãƒ“ãƒ¥ãƒ¼æ‹…å½“): Week 4ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼
3. **researcher** (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): LLM Vision APIèª¿æŸ»

**ä¸¦åˆ—å®Ÿè¡Œæ¨å¥¨:**
- Week 1: ImageLoader + ImageProcessorï¼ˆä¸¦åˆ—å®Ÿè¡Œå¯èƒ½ï¼‰
- Week 2-3: é€æ¬¡å®Ÿè¡Œå¿…é ˆï¼ˆä¾å­˜é–¢ä¿‚ã‚ã‚Šï¼‰

**å“è³ªåŸºæº–:**
- ã‚«ãƒãƒ¬ãƒƒã‚¸: 80%ä»¥ä¸Š
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: 1ãƒšãƒ¼ã‚¸/ç§’ä»¥ä¸Š
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: ãƒ‘ã‚¹ãƒˆãƒ©ãƒãƒ¼ã‚µãƒ«å¯¾ç­–ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å¾¹åº•

**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:**
1. corderã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«Week 1ã‚¿ã‚¹ã‚¯ã‚’ä¾é ¼ï¼ˆImageLoader + ImageProcessorä¸¦åˆ—å®Ÿè£…ï¼‰
2. ã‚·ã‚¹ãƒ†ãƒ ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆpoppler-utilsï¼‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
3. ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®æº–å‚™

---

**ä½œæˆè€…**: Director Agent
**æ‰¿èª**: Main Agentï¼ˆäºˆå®šï¼‰
**é–‹å§‹äºˆå®šæ—¥**: 2025-12-21
**å®Œäº†äºˆå®šæ—¥**: 2026-01-18ï¼ˆ4é€±é–“å¾Œï¼‰
